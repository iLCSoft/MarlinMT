#################################
# cmake file for building MarlinLCIO component
# @author Remi Ete, DESY
#################################

find_package( LCIO REQUIRED )

marlin_add_doxygen_sources( GLOB_RECURSE DIRECTORY include MATCHING_PATTERN *.h )
marlin_add_doxygen_sources( GLOB_RECURSE DIRECTORY src MATCHING_PATTERN *.cc )
marlin_add_doxygen_sources( GLOB_RECURSE DIRECTORY plugins MATCHING_PATTERN *.cc )

aux_source_directory( src LCIOPlugins_sources )
aux_source_directory( plugins LCIOPlugins_sources )

add_library( LCIOPlugins MODULE ${LCIOPlugins_sources} )
add_library( Marlin::LCIOPlugins ALIAS LCIOPlugins )
set_target_properties( LCIOPlugins PROPERTIES OUTPUT_NAME MarlinLCIOPlugins )
install( TARGETS LCIOPlugins LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR} )

target_include_directories( 
  LCIOPlugins SYSTEM PUBLIC
  $<BUILD_INTERFACE:${LCIO_INCLUDE_DIRS}>
)
target_include_directories( 
  LCIOPlugins BEFORE PUBLIC 
  $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>
)
target_link_libraries( 
  LCIOPlugins PUBLIC
  Marlin::Core
  ${LCIO_LIBRARIES}
)

# Add MarlinLCIO library to list of MARLIN_DLL libraries
marlin_add_plugin_library( TARGETS LCIOPlugins )
